(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-745f"],{"+uKb":function(t,e,a){"use strict";a.r(e);var l=a("wc+H"),n=a.n(l);for(var s in l)"default"!==s&&function(t){a.d(e,t,function(){return l[t]})}(s);e.default=n.a},"5QzL":function(t,e,a){"use strict";a.r(e);var l=a("vGRn"),n=a("MZEG");for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);var r=a("KHd+"),i=Object(r.a)(n.default,l.a,l.b,!1,null,null,null);i.options.__file="shipment.vue",e.default=i.exports},"7zwI":function(t,e,a){"use strict";var l=a("PyOc");a.n(l).a},BeLl:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(t){return(0,l.default)({url:"dhl",method:"get",params:t})},e.dhlList=function(){return(0,l.default)({url:"dhlList",method:"get"})},e.createSubmit=function(t){return t=(t=n.default.parse({data:t})).data,(0,l.default)({url:"dhl",method:"POST",data:t})},e.updateSubmit=function(t,e){return e=(e=n.default.parse({data:e})).data,(0,l.default)({url:"dhl/"+t,method:"PUT",data:e})},e.setDelete=function(t,e){return e=(e=n.default.parse({data:e})).data,(0,l.default)({url:"dhl/"+t,method:"DELETE",data:e})};var l=s(a("t3Un")),n=s(a("Qyje"));function s(t){return t&&t.__esModule?t:{default:t}}},MZEG:function(t,e,a){"use strict";a.r(e);var l=a("ywk8"),n=a.n(l);for(var s in l)"default"!==s&&function(t){a.d(e,t,function(){return l[t]})}(s);e.default=n.a},PyOc:function(t,e,a){},RQhk:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(t){return(0,l.default)({url:"indent",method:"get",params:t})},e.createSubmit=function(t){return t=(t=n.default.parse({data:t})).data,(0,l.default)({url:"indentShipments",method:"POST",data:t})},e.updateSubmit=function(t,e){return e=(e=n.default.parse({data:e})).data,(0,l.default)({url:"indentRefund/"+t,method:"PUT",data:e})},e.getDetails=function(t){return(0,l.default)({url:"indent/"+t,method:"get"})},e.query=function(t){return(0,l.default)({url:"query",method:"get",params:t})},e.updateDhl=function(t){return t=(t=n.default.parse({data:t})).data,(0,l.default)({url:"updateDhl",method:"POST",data:t})};var l=s(a("t3Un")),n=s(a("Qyje"));function s(t){return t&&t.__esModule?t:{default:t}}},Rrcp:function(t,e,a){"use strict";a.r(e);var l=a("dcNw"),n=a("+uKb");for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a("7zwI");var r=a("KHd+"),i=Object(r.a)(n.default,l.a,l.b,!1,null,null,null);i.options.__file="Detail.vue",e.default=i.exports},dcNw:function(t,e,a){"use strict";var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"app-container"},[a("el-card",{attrs:{shadow:"always"}},[a("el-row",{attrs:{type:"flex"}},[a("el-col",{staticStyle:{"font-size":"18px","line-height":"45px","font-weight":"bold"},attrs:{span:20}},[t._v("订单号："+t._s(t.list.identification))]),t._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:3}},[0===t.list.shipping_status&&2===t.list.state?a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.handleDelete(t.list,2)}}},[t._v("发货")]):t._e()],1),t._v(" "),a("el-col",{attrs:{span:1}})],1),t._v(" "),a("el-row",{staticStyle:{"line-height":"35px","font-size":"14px"},attrs:{type:"flex"}},[a("el-col",{attrs:{span:10}},[t._v("下单时间："+t._s(t.list.created_at))]),t._v(" "),a("el-col",{attrs:{span:10}},[t._v("买家信息："+t._s(t.list.good_location?t.list.good_location.name:""))]),t._v(" "),a("el-col",{staticStyle:{color:"rgba(0, 0, 0, 0.447)"},attrs:{span:2}},[t._v("状态")]),t._v(" "),a("el-col",{staticStyle:{color:"rgba(0, 0, 0, 0.447)"},attrs:{span:2}},[t._v("订单金额")])],1),t._v(" "),a("el-row",{staticStyle:{"line-height":"35px","font-size":"14px"},attrs:{type:"flex"}},[a("el-col",{attrs:{span:10}},[t._v("备注："+t._s(t.list.remark?t.list.remark:"无"))]),t._v(" "),a("el-col",{attrs:{span:10}},[t._v("联系方式："+t._s(t.list.good_location?t.list.good_location.cellphone:""))]),t._v(" "),a("el-col",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{span:2}},[t._v(t._s(t.list.state_show))]),t._v(" "),a("el-col",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{span:2}},[t._v("¥ "+t._s(t._f("1000")(t.list.total)))])],1),t._v(" "),a("el-row",{staticStyle:{"line-height":"35px","font-size":"14px"},attrs:{type:"flex"}},[t.list.good_location?a("el-col",{attrs:{span:14}},[t._v("收货地址："+t._s(t.list.good_location.location)+" ("+t._s(t.list.good_location.address)+")")]):t._e()],1)],1),t._v(" "),a("el-card",{staticStyle:{"margin-top":"25px"},attrs:{shadow:"always"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("订单进度")])]),t._v(" "),a("el-steps",{attrs:{active:t.order_progress,"align-center":""}},[a("el-step",{attrs:{description:t.list.created_at,title:"买家下单"}}),t._v(" "),a("el-step",{attrs:{description:"1970-01-01 08:00:00"!==t.list.pay_time?t.list.pay_time:"",title:"买家付款"}}),t._v(" "),a("el-step",{attrs:{description:"1970-01-01 08:00:00"!==t.list.shipping_time?t.list.shipping_time:"",title:"商家发货"}}),t._v(" "),a("el-step",{attrs:{description:"1970-01-01 08:00:00"!==t.list.confirm_time?t.list.confirm_time:"",title:"交易完成"}})],1)],1),t._v(" "),a("el-card",{staticStyle:{"margin-top":"25px"},attrs:{shadow:"always"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("商品信息")])]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list.goods_list,"summary-method":t.getSummaries,border:"","show-summary":""}},[a("el-table-column",{attrs:{align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"45px",height:"45px"},attrs:{src:t.row.img}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"商品",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"规格"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.specification))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"单价（元）",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.price))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"数量（件）",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.number))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"金额（元）",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.price*e.row.number))])]}}])})],1)],1),t._v(" "),a("el-card",{staticStyle:{"margin-top":"25px"},attrs:{shadow:"always"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("在线支付记录")])]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list.payment_log_all,border:""}},[a("el-table-column",{attrs:{label:"订单描述",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"商户订单号",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.number))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"第三方订单号",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.transaction_id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"支付类型",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.type_show))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作金额（元）",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("1000")(e.row.money_show)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"平台",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.platform_show))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.state_show))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{loading:t.queryLoading,type:"primary",round:""},on:{click:function(a){t.queryNumber(e.row)}}},[t._v("同步")])]}}])})],1),t._v(" "),a("el-alert",{staticStyle:{"margin-top":"10px"},attrs:{title:"可能存在用户支付成功，但平台支付状态未改变的情况，此时，可以主动点击“同步”进行支付状态同步，如果查询失败，可过段时间再同步一次;这里不支持对支付订单退款，请通过第三方支付平台后台操作，然后再调用同步操作",type:"warning"}})],1),t._v(" "),a("el-card",{staticStyle:{"margin-top":"25px"},attrs:{shadow:"always"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("配送")])]),t._v(" "),a("div",[a("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:t.rules,model:t.temp,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"运费"}},[t.list.carriage?a("span",[t._v(t._s(t._f("1000")(t.list.carriage))+"元")]):a("span",[t._v("免运费")])]),t._v(" "),a("el-form-item",{attrs:{label:"物流公司",prop:"dhl_id"}},[t.list.dhl&&!t.temp.dhl?a("div",[t._v(t._s(t.list.dhl.name))]):a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.temp.dhl_id,callback:function(e){t.$set(t.temp,"dhl_id",e)},expression:"temp.dhl_id"}},t._l(t.dhl,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"运单号",prop:"odd"}},[t.list.odd&&!t.temp.odd?a("div",[t._v(t._s(t.list.odd))]):a("el-input",{attrs:{maxlength:"255",clearable:""},model:{value:t.temp.odd,callback:function(e){t.$set(t.temp,"odd",e)},expression:"temp.odd"}})],1),t._v(" "),3===t.list.state?a("el-form-item",[t.temp.id?a("el-button",{attrs:{loading:t.dhlLoading,type:"primary"},on:{click:t.setDhlUpdate}},[t._v("保存")]):a("el-button",{attrs:{type:"primary"},on:{click:t.dhlUpdate}},[t._v("编辑")])],1):t._e()],1)],1)]),t._v(" "),t.list.refund_money?a("el-card",{staticStyle:{"margin-top":"25px"},attrs:{shadow:"always"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("退款详情")])]),t._v(" "),a("el-row",{staticStyle:{"line-height":"35px","font-size":"14px"},attrs:{type:"flex"}},[a("el-col",{attrs:{span:24}},[t._v("退款金额："+t._s(t._f("1000")(t.list.refund_money))+"元")])],1),t._v(" "),a("el-row",{staticStyle:{"line-height":"35px","font-size":"14px"},attrs:{type:"flex"}},[a("el-col",{attrs:{span:24}},[t._v("退款方式："+t._s(t.list.refund_way))])],1),t._v(" "),a("el-row",{staticStyle:{"line-height":"35px","font-size":"14px"},attrs:{type:"flex"}},[a("el-col",{attrs:{span:24}},[t._v("退款说明："+t._s(t.list.refund_reason))])],1)],1):t._e(),t._v(" "),a("div",{staticClass:"right",staticStyle:{"margin-top":"20px"}},[1!==t.list.state&&!t.list.refund_money||8===!t.list.state?a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("退款")]):t._e(),t._v(" "),2===t.list.state?a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.createSubmit()}}},[t._v("发货")]):t._e()],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogFormVisible,"close-on-click-modal":!1,title:"退款"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"refundForm",staticStyle:{width:"700px"},attrs:{rules:t.refundRules,model:t.refundTemp,"label-position":"left","label-width":"120px"}},[a("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"退款金额",prop:"refund_money"}},[a("el-input-number",{attrs:{precision:2,min:.01,max:t.list.total,label:"退款金额"},model:{value:t.refundTemp.refund_money,callback:function(e){t.$set(t.refundTemp,"refund_money",e)},expression:"refundTemp.refund_money"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"退款方式",prop:"refund_way"}},[a("el-radio-group",{model:{value:t.refundTemp.refund_way,callback:function(e){t.$set(t.refundTemp,"refund_way",e)},expression:"refundTemp.refund_way"}},[a("el-radio",{attrs:{label:0}},[t._v("退到余额")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("原路退回")])],1),t._v(" "),a("el-alert",{attrs:{title:"退到余额：将款项退到用户余额中;原路退回：用户通过哪个支付途径付款，就退回哪里",type:"warning"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"退款理由",prop:"refund_reason"}},[a("el-input",{attrs:{placeholder:"请填写退款理由",maxlength:"500",clearable:""},model:{value:t.refundTemp.refund_reason,callback:function(e){t.$set(t.refundTemp,"refund_reason",e)},expression:"refundTemp.refund_reason"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(t._s(t.$t("usuel.cancel")))]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.refundData()}}},[t._v(t._s(t.$t("usuel.confirm")))])],1)],1)],1)},n=[];a.d(e,"a",function(){return l}),a.d(e,"b",function(){return n})},vGRn:function(t,e,a){"use strict";var l=function(){var t=this.$createElement;return(this._self._c||t)("detail",{attrs:{"is-edit":!0}})},n=[];a.d(e,"a",function(){return l}),a.d(e,"b",function(){return n})},"wc+H":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("RQhk"),n=a("BeLl");e.default={name:"IndentListDetails",data:function(){return{dhlLoading:!1,queryLoading:!1,order_progress:0,logistics:!1,list:"",dialogFormVisible:!1,listLoading:!0,id:this.$route.query.id,temp:{},rules:{dhl_id:[{required:!0,message:"请选择物流公司",trigger:"change"}],odd:[{required:!0,message:"请输入订单号",trigger:"blur"}]},refundRules:{refund_money:[{required:!0,message:"请输入退款金额",trigger:"blur"}],refund_way:[{required:!0,message:"请选择退款方式",trigger:"change"}],refund_reason:[{required:!0,message:"请输入退款原因",trigger:"blur"}]},refundTemp:{refund_way:0,refund_reason:"",refund_money:""},dhl:[]}},created:function(){this.getList(),this.getDhl()},methods:{getList:function(){var t=this;this.listLoading=!0,(0,l.getDetails)(this.id).then(function(e){for(var a in e.data.goods_list){switch(e.data.state){case 1:t.order_progress=1;break;case 2:t.order_progress=2;break;case 3:t.order_progress=3;break;case 5:t.order_progress=4}e.data.goods_list[a].good_sku&&(e.data.goods_list[a].good_sku.product_sku.forEach(function(t){e.data.goods_list[a].specification?e.data.goods_list[a].specification+=t.value+";":e.data.goods_list[a].specification=t.value+";"}),e.data.goods_list[a].specification=e.data.goods_list[a].specification.substr(0,e.data.goods_list[a].specification.length-1))}t.list=e.data,t.refundTemp.refund_money=t.list.total,t.listLoading=!1})},getDhl:function(){var t=this;(0,n.dhlList)().then(function(e){t.dhl=e.data})},createSubmit:function(){var t=this;this.$refs.dataForm.validate(function(e){e&&(t.temp.id=t.list.id,(0,l.createSubmit)(t.temp).then(function(){t.dialogFormVisible=!1,t.$notify({title:t.$t("hint.succeed"),message:"发货成功",type:"success",duration:2e3}),setTimeout(t.$router.back(-1),2e3)}))})},refundData:function(){var t=this;this.$refs.refundForm.validate(function(e){e&&(0,l.updateSubmit)(t.list.id,t.refundTemp).then(function(){t.dialogFormVisible=!1,t.$notify({title:t.$t("hint.succeed"),message:"退款成功",type:"success",duration:2e3}),setTimeout(t.$router.back(-1),2e3)})})},queryNumber:function(t){var e=this;this.queryLoading=!0,(0,l.query)(t).then(function(){e.$notify({title:e.$t("hint.succeed"),message:"同步成功",type:"success",duration:2e3}),e.getList(),e.queryLoading=!1})},dhlUpdate:function(){this.temp=this.list},setDhlUpdate:function(){var t=this;this.dhlLoading=!0,(0,l.updateDhl)(this.temp).then(function(){t.dhlLoading=!1,t.temp={},t.$notify({title:t.$t("hint.succeed"),message:"保存成功",type:"success",duration:2e3})})},getSummaries:function(t){var e=t.columns,a=t.data,l=[];return e.forEach(function(t,e){0!==e?1!==e&&2!==e&&3!==e&&(4===e?a.length>0&&(l[e]=a.reduce(function(t,e){var a=Number(e.number);return isNaN(a)?t:t+e.number},0),l[e]+=" 件"):5===e&&a.length>0&&(l[e]=a.reduce(function(t,e){var a=Number(e.price);return isNaN(a)?t:t+e.number*e.price*100},0),l[e]=l[e]/100+" 元")):l[e]="总价"}),l}}}},ywk8:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){return t&&t.__esModule?t:{default:t}}(a("Rrcp"));e.default={name:"EditProduct",components:{Detail:l.default}}}}]);