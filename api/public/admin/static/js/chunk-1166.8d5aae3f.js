(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1166"],{"37xs":function(e,t,r){"use strict";r.r(t);var i=r("cqMt"),a=r("9LDv");for(var o in a)"default"!==o&&function(e){r.d(t,e,function(){return a[e]})}(o);r("nB+H");var n=r("KHd+"),l=Object(n.a)(a.default,i.a,i.b,!1,null,null,null);l.options.__file="Detail.vue",t.default=l.exports},49:function(e,t){},"4hzs":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getList=function(e){return(0,i.default)({url:"Good",method:"get",params:e})},t.createSubmit=function(e){return e=(e=a.default.parse({data:e})).data,(0,i.default)({url:"Good",method:"POST",data:e})},t.updateSubmit=function(e,t){return t=(t=a.default.parse({data:t})).data,(0,i.default)({url:"Good/"+e,method:"PUT",data:t})},t.setState=function(e,t){return t=(t=a.default.parse({data:t})).data,(0,i.default)({url:"GoodState/"+e,method:"PUT",data:t})},t.setDelete=function(e,t){return t=(t=a.default.parse({data:t})).data,(0,i.default)({url:"Good/"+e,method:"DELETE",data:t})},t.getShow=function(e,t){return(0,i.default)({url:"Good/"+e,method:"GET",params:t})},t.getSpecification=function(e){return(0,i.default)({url:"goodSpecification/"+e,method:"GET"})};var i=o(r("t3Un")),a=o(r("Qyje"));function o(e){return e&&e.__esModule?e:{default:e}}},"6tNa":function(e,t,r){tinymce.PluginManager.add("axupimgs",function(e,t){window.axupimgs={};var r="./static/tinymce"+"/plugins/axupimgs/upfiles.html";axupimgs.images_upload_handler=e.getParam("images_upload_handler",void 0,"function"),axupimgs.images_upload_base_path=e.getParam("images_upload_base_path","","string"),axupimgs.axupimgs_filetype=e.getParam("axupimgs_filetype",".png,.gif,.jpg,.jpeg","string"),axupimgs.res=[];var i=function(){return e.windowManager.openUrl({title:"Ax多图片上传",size:"large",url:r,buttons:[{type:"cancel",text:"Close"},{type:"custom",text:"插入图片",name:"save",primary:!0}],onAction:function(t,r){switch(r.name){case"save":var i="",a=axupimgs.res,o=a.length;if(o<1)return alert("请选上传文件"),!1;for(let e=0;e<o;e++)a[e].url&&(i+='<img src="'+a[e].url+'" />');e.insertContent(i),axupimgs.res=[],t.close()}}})};return e.ui.registry.getAll().icons.axupimgs||e.ui.registry.addIcon("axupimgs",'<svg viewBox="0 0 1280 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M1126.2,779.8V87.6c0-24-22.6-86.9-83.5-86.9H83.5C14.7,0.7,0,63.7,0,87.7v692c0,36.2,29.2,89.7,83.5,89.7l959.3-1.3c51.7,0,83.5-42.5,83.5-88.3zm-1044,4V86.3h961.6V783.7H82.2v0.1z" fill="#ff0000"/><path d="M603,461.6L521.1,366.3,313,629.8,227.2,546.8,102.4,716.8H972.8v-170L768.2,235.2,603.1,461.6zM284.6,358.4a105.4,105.4,0,0,0,73.5-30c19.5-19.1,30.3-45,30.2-71.8,0-56.8-45.9-103-102.4-103-56.6,0-102.4,46.1-102.4,103C183.4,313.5,228,358.4,284.6,358.4z" fill="#ff0000"/><path d="M1197.7,153.6l-0.3,669.3s13.5,113.9-67.4,113.9H153.6c0,24.1,23.9,87.2,83.5,87.2h959.3c58.3,0,83.6-49.5,83.6-89.9V240.8c-0.1-41.8-44.9-87.2-82.3-87.2z" fill="#ff0000"/></svg>'),e.ui.registry.addButton("axupimgs",{icon:"axupimgs",tooltip:"Ax多图片上传",onAction:function(){i()}}),e.ui.registry.addMenuItem("axupimgs",{icon:"axupimgs",text:"图片批量上传...",onAction:function(){i()}}),{getMetadata:function(){return{name:"Ax多图片上传",url:"axupimgs.php"}}}})},"7dcK":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.creatIds=void 0;var i=o(r("QbLZ")),a=o(r("jo6Y"));function o(e){return e&&e.__esModule?e:{default:e}}t.getLevels=n,t.flatten=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments[2]||{},o=r.optionValue,l=void 0===o?"id":o,s=r.optionText,u=void 0===s?"value":s,c=[],d=0,p={},f=n(e);if(0===e.length)return c;e.forEach(function(e){var t=e.leaf;if(!t||0===t.length)return!0;d=(d||1)*t.length}),t.forEach(function(e){var t=e.skus,r=(0,a.default)(e,["skus"]);p[t.map(function(e){return e.k_id+"_"+e.v_id}).join("|")]=r});for(var m=function(t){var r=[],o=[];e.forEach(function(i,a){var n=i.leaf,s={};if(!n||0===n.length)return!0;if(n.length>1){var c=parseInt(t/f[a],10)%n.length;s=e[a].leaf[c]}else s=e[a].leaf[0];i[l]&&s[l]&&(o.push(i[l]+"_"+s[l]),r.push({k_id:i[l],k:i[u],v_id:s[l],v:s[u]}))});var n=p[o.join("|")]||{},s=(0,a.default)(n,[]);c.push((0,i.default)({},s,{skus:r}))},g=0;g<d;g++)m(g);return c},t.isEqual=function(e,t,r){var i=(r||{}).optionValue,a=void 0===i?"id":i;return t.length===e.length&&t.every(function(r,i){var o=r.leaf,n=void 0===o?[]:o,l=e[i].leaf||[];return e[i][a]===t[i][a]&&n.length===l.length&&n.map(function(e){return e[a]}).join(",")===l.map(function(e){return e[a]}).join(",")})};t.creatIds=function(e){return e.reduce(function(t,r,i){return""+t+r.k_id+"-"+r.v_id+(i===e.length-1?"":"_")},"")};function n(e){for(var t=[],r=e.length-1;r>=0;r--)e[r+1]&&e[r+1].leaf?t[r]=e[r+1].leaf.length*t[r+1]||1:t[r]=1;return t}},"9LDv":function(e,t,r){"use strict";r.r(t);var i=r("w9L7"),a=r.n(i);for(var o in i)"default"!==o&&function(e){r.d(t,e,function(){return i[e]})}(o);t.default=a.a},IAgb:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=v(r("m1cH")),o=v(r("Dbz9")),n=v(r("Yz+Y")),l=v(r("iCc5")),s=v(r("V7oC")),u=v(r("FYw3")),c=v(r("mRg0")),d=v(r("Kw5r")),p=v(r("L+H0")),f=v(r("yMd6")),m=r("7Qib"),g=r("vCG0");function v(e){return e&&e.__esModule?e:{default:e}}var _=(0,p.default)({components:{SkuTable:f.default}})(i=function(e){function t(){var e,r,i,a;(0,l.default)(this,t);for(var o=arguments.length,s=Array(o),c=0;c<o;c++)s[c]=arguments[c];return r=i=(0,u.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(s))),i.addValues=[],i.productSkus=[],i.specification=[],a=r,(0,u.default)(i,a)}return(0,c.default)(t,e),(0,s.default)(t,[{key:"_setData",value:function(e){if(e&&e.length){var t=(0,g.param2Data)(e),r=t.productSkus,i=t.specification;this.specification=i,this.productSkus=(0,o.default)(r)}}},{key:"_getData",value:function(){return this.$refs.SkuTable.data}},{key:"addSpec",value:function(){this.specification.push({id:(0,m.createUniqueString)()+"_id",value:"",leaf:[]})}},{key:"delSepc",value:function(e){this.specification.splice(e,1)}},{key:"addOption",value:function(e){var t=this.addValues[e]||"";if(t=t.trim()){var r=this.specification[e].leaf,i=t.split(/\s+/).filter(function(e){return!r.some(function(t){return t.value===e})}).map(function(e){return{id:(0,m.createUniqueString)()+"_id",value:e}});this.specification[e].leaf=(0,m.uniqueArr)([].concat((0,a.default)(r),(0,a.default)(i))),this.$set(this.addValues,e,"")}}},{key:"delOption",value:function(e,t){this.specification[e].leaf.splice(t,1)}},{key:"disabled",get:function(){return this.specification.some(function(e){return!e.value})}},{key:"specificationFilter",get:function(){return this.specification.filter(function(e){return e.value&&e.leaf.length})}}]),t}(d.default))||i;t.default=_},JxI4:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(r("5WJX"));r("RsPH");var a=o(r("ynI1"));function o(e){return e&&e.__esModule?e:{default:e}}r("DWi2"),r("Tqh3"),r("Oupb"),r("B9FH"),r("hOyB"),r("lDS1"),r("ZNhe"),r("MVQK"),r("Qjfq"),r("Cp0W"),r("6tNa"),t.default={name:"Tinymce",components:{Editor:a.default},props:{url:{default:"",type:String},accept:{default:"image/jpeg, image/png, image/gif",type:String},maxSize:{default:2097152,type:Number},value:{type:String,default:""},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:"lists image media table link wordcount code fullscreen preview axupimgs"},toolbar:{type:[String,Array],default:"axupimgs media lists table link | undo redo |  formatselect | bold italic forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent  | removeformat code fullscreen image preview"},header:{type:[String,Object],default:""}},data:function(){var e=this;return{init:{language_url:"./static/tinymce/langs/zh_CN.js",language:"zh_CN",skin_url:"./static/tinymce/skins/ui/oxide",content_css:"./static/tinymce/skins/content/default/content.css",height:300,plugins:this.plugins,toolbar:this.toolbar,branding:!1,menubar:!1,images_upload_handler:function(t,r,i){if(t.blob().size>e.maxSize&&i("文件体积过大"),e.accept.indexOf(t.blob().type)>=0){var a=new XMLHttpRequest,o=new FormData,n=e;a.withCredentials=!1,a.open("POST",n.url),a.setRequestHeader("Authorization",n.header.Authorization),a.onload=function(){if(200!==a.status)return n.$emit("on-upload-fail"),void i("上传失败: "+JSON.parse(a.response).message);r(a.responseText)},o.append("file",t.blob()),o.append("type",1),o.append("size",e.maxSize),a.send(o)}else i("图片格式错误")}},myValue:this.value}},watch:{value:function(e){this.myValue=e},myValue:function(e){this.$emit("input",e)}},mounted:function(){i.default.init({})},methods:{onClick:function(e){this.$emit("onClick",e,i.default)},clear:function(){this.myValue=""}}}},L7y4:function(e,t,r){"use strict";r.r(t);var i=r("zJba"),a=r("RTeI");for(var o in a)"default"!==o&&function(e){r.d(t,e,function(){return a[e]})}(o);r("Sd8X");var n=r("KHd+"),l=Object(n.a)(a.default,i.a,i.b,!1,null,"7af4fdcb",null);l.options.__file="index.vue",t.default=l.exports},OLa9:function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"tinymce-box"},[r("editor",{attrs:{init:e.init,disabled:e.disabled},on:{onClick:e.onClick},model:{value:e.myValue,callback:function(t){e.myValue=t},expression:"myValue"}})],1)},a=[];r.d(t,"a",function(){return i}),r.d(t,"b",function(){return a})},R8QZ:function(e,t,r){},RTeI:function(e,t,r){"use strict";r.r(t);var i=r("IAgb"),a=r.n(i);for(var o in i)"default"!==o&&function(e){r.d(t,e,function(){return i[e]})}(o);t.default=a.a},Sd8X:function(e,t,r){"use strict";var i=r("R8QZ");r.n(i).a},aCVI:function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("el-table",e._g(e._b({staticStyle:{width:"100%"},attrs:{data:e.data,border:""}},"el-table",e.$attrs,!1),e.$listeners),[e._l(e.columns,function(t,i){return r("el-table-column",{key:i,attrs:{label:t.label,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.skus[i].v)+"\n      ")]}}])})}),e._v(" "),r("el-table-column",{attrs:{prop:"img",label:"图片",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form",{attrs:{model:t.row}},[r("el-form-item",{attrs:{prop:"cost_price"}},[r("el-upload",{staticClass:"avatar-uploaders",attrs:{"show-file-list":!1,"on-success":function(r,i){return e.specificationMarketAvatarSuccess(r,t.$index)},"before-upload":e.beforeAvatarUpload,action:e.actionurl,headers:e.imgHeaders,data:e.imgData}},[t.row.img?r("img",{staticClass:"avatar",staticStyle:{width:"80px",height:"80px"},attrs:{src:t.row.img}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icons"})])],1)],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"address",fixed:"right",label:"成本价(元)",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form",{attrs:{model:t.row}},[r("el-form-item",{attrs:{prop:"cost_price"}},[r("el-input",{attrs:{size:"mini",placeholder:"请输入成本价",clearable:""},on:{input:function(r){return e.updateInput(r,t.$index,"cost_price")}},model:{value:t.row.cost_price,callback:function(r){e.$set(t.row,"cost_price",r)},expression:"scope.row.cost_price"}})],1)],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"address",fixed:"right",label:"市场价(元)",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form",{attrs:{model:t.row}},[r("el-form-item",{attrs:{prop:"market_price"}},[r("el-input",{attrs:{size:"mini",placeholder:"请输入市场价",clearable:""},on:{input:function(r){return e.updateInput(r,t.$index,"market_price")}},model:{value:t.row.market_price,callback:function(r){e.$set(t.row,"market_price",r)},expression:"scope.row.market_price"}})],1)],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"address",fixed:"right",label:"销售价(元)",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form",{attrs:{model:t.row}},[r("el-form-item",{attrs:{prop:"price"}},[r("el-input",{attrs:{size:"mini",placeholder:"请输入销售价",clearable:""},on:{input:function(r){return e.updateInput(r,t.$index,"price")}},model:{value:t.row.price,callback:function(r){e.$set(t.row,"price",r)},expression:"scope.row.price"}})],1)],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"address",fixed:"right",label:"库存",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form",{attrs:{model:t.row}},[r("el-form-item",{attrs:{prop:"inventory"}},[r("el-input",{attrs:{size:"mini",placeholder:"请输入库存",clearable:""},on:{input:function(r){return e.updateInput(r,t.$index,"inventory")}},model:{value:t.row.inventory,callback:function(r){e.$set(t.row,"inventory",r)},expression:"scope.row.inventory"}})],1)],1)]}}])})],2)],1)},a=[];r.d(t,"a",function(){return i}),r.d(t,"b",function(){return a})},alm3:function(e,t,r){"use strict";r.r(t);var i=r("OLa9"),a=r("v1P2");for(var o in a)"default"!==o&&function(e){r.d(t,e,function(){return a[e]})}(o);var n=r("KHd+"),l=Object(n.a)(a.default,i.a,i.b,!1,null,null,null);l.options.__file="index.vue",t.default=l.exports},bvPJ:function(e,t,r){},cqMt:function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"createPost-container",staticStyle:{"padding-top":"40px"}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",staticStyle:{"padding-left":"100px","padding-right":"100px"},attrs:{model:e.ruleForm,rules:e.rules,"label-width":"150px"}},[r("h3",[e._v("基本信息")]),e._v(" "),r("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"商品名称",prop:"name"}},[r("el-input",{attrs:{maxlength:"60",clearable:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),r("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"货号",prop:"number"}},[r("el-input",{attrs:{maxlength:"50",clearable:""},model:{value:e.ruleForm.number,callback:function(t){e.$set(e.ruleForm,"number",t)},expression:"ruleForm.number"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"运费模板",prop:"freight_id"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.ruleForm.freight_id,callback:function(t){e.$set(e.ruleForm,"freight_id",t)},expression:"ruleForm.freight_id"}},e._l(e.freight,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),r("div",{staticClass:"el-upload__tip"},[e._v("请选择商品的所属类型，进而完善此商品的规格")])],1),e._v(" "),r("el-form-item",{attrs:{label:"主图",prop:"img"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,"on-progress":e.handleProgress,action:e.actionurl,headers:e.imgHeaders,data:e.imgMasterData}},[e.imgProgress?r("span",[r("el-progress",{staticClass:"progress-img",attrs:{percentage:e.imgProgressPercent,type:"circle"}})],1):r("span",[e.ruleForm.img?r("img",{staticClass:"avatar",attrs:{src:e.ruleForm.img}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])]),e._v(" "),r("div",{staticClass:"el-upload__tip"},[e._v("每张不能大于2M")])],1),e._v(" "),r("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"视频",prop:"video"}},[r("el-input",{attrs:{clearable:"",placeholder:"视频地址"},on:{blur:e.setVideo},model:{value:e.ruleForm.video,callback:function(t){e.$set(e.ruleForm,"video",t)},expression:"ruleForm.video"}}),e._v(" "),r("el-input",{staticStyle:{"padding-top":"10px","padding-bottom":"10px"},attrs:{clearable:"",placeholder:"封面地址"},on:{blur:e.setPoster},model:{value:e.ruleForm.poster,callback:function(t){e.$set(e.ruleForm,"poster",t)},expression:"ruleForm.poster"}}),e._v(" "),e.ruleForm.video?r("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:e.playerOptions}}):e._e(),e._v(" "),r("div",{staticClass:"el-upload__tip"},[e._v("填写视频地址")])],1),e._v(" "),r("el-form-item",{attrs:{label:"图片列表",prop:"resource"}},[r("el-upload",{attrs:{limit:5,action:e.actionurl,headers:e.imgHeaders,"on-success":e.handleAvatarSuccessList,"on-remove":e.handleRemove,"before-upload":e.beforeAvatarUploadList,data:e.imgData,"file-list":e.ruleForm.imgList,multiple:"","list-type":"picture-card"}},[r("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),e._v(" "),r("div",{staticClass:"el-upload__tip"},[e._v("最多可上传5张，每张不能大于2M")])],1),e._v(" "),r("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"关键字",prop:"keywords"}},[r("el-input",{attrs:{maxlength:"255",clearable:""},model:{value:e.ruleForm.keywords,callback:function(t){e.$set(e.ruleForm,"keywords",t)},expression:"ruleForm.keywords"}})],1),e._v(" "),r("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"短描述",prop:"short_description"}},[r("el-input",{attrs:{maxlength:"160",clearable:""},model:{value:e.ruleForm.short_description,callback:function(t){e.$set(e.ruleForm,"short_description",t)},expression:"ruleForm.short_description"}})],1),e._v(" "),r("h3",[e._v("商品规格")]),e._v(" "),r("el-form-item",{attrs:{label:"类目",prop:"category_id"}},[r("el-cascader",{attrs:{options:e.goods_type,props:{expandTrigger:"hover"},clearable:""},on:{change:e.goodsType},model:{value:e.ruleForm.category_id,callback:function(t){e.$set(e.ruleForm,"category_id",t)},expression:"ruleForm.category_id"}}),e._v(" "),r("div",{staticClass:"el-upload__tip"},[e._v("请选择商品的所属类型，进而完善此商品的规格")])],1),e._v(" "),e.goods_brand.length>0?r("el-form-item",{attrs:{label:"品牌",prop:"brand_id"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:function(t){e.change(t)}},model:{value:e.ruleForm.brand_id,callback:function(t){e.$set(e.ruleForm,"brand_id",t)},expression:"ruleForm.brand_id"}},e._l(e.goods_brand,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1):e._e(),e._v(" "),e._l(e.good_attribute,function(t,i){return r("el-form-item",{key:i,attrs:{label:t.name}},[1===t.type?r("el-input",{staticStyle:{width:"400px"},attrs:{clearable:""},on:{input:function(t){e.change(t)}},model:{value:e.ruleForm.good_specification[i].data,callback:function(t){e.$set(e.ruleForm.good_specification[i],"data",t)},expression:"ruleForm.good_specification[i]['data']"}}):2===t.type?r("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:function(t){e.change(t)}},model:{value:e.ruleForm.good_specification[i].data,callback:function(t){e.$set(e.ruleForm.good_specification[i],"data",t)},expression:"ruleForm.good_specification[i]['data']"}},e._l(t.value,function(e,t){return r("el-option",{key:t,attrs:{label:e,value:t}})})):r("el-select",{attrs:{clearable:"",multiple:"",placeholder:"请选择"},on:{change:function(t){e.change(t)}},model:{value:e.ruleForm.good_specification[i].data,callback:function(t){e.$set(e.ruleForm.good_specification[i],"data",t)},expression:"ruleForm.good_specification[i]['data']"}},e._l(t.value,function(e,t){return r("el-option",{key:t,attrs:{label:e,value:t}})}))],1)}),e._v(" "),r("sku",{ref:"SkuDemo"}),e._v(" "),r("h3",[e._v("详情")]),e._v(" "),r("el-form-item",{attrs:{label:"详情",prop:"details"}},[r("tinymce",{ref:"editor",attrs:{disabled:e.disabled,url:e.actionurl,header:e.imgHeaders},model:{value:e.ruleForm.details,callback:function(t){e.$set(e.ruleForm,"details",t)},expression:"ruleForm.details"}})],1),e._v(" "),r("h3",[e._v("设置")]),e._v(" "),r("el-form-item",{attrs:{label:"上架时间",prop:"is_show"}},[r("el-radio-group",{model:{value:e.ruleForm.is_show,callback:function(t){e.$set(e.ruleForm,"is_show",t)},expression:"ruleForm.is_show"}},[r("el-radio",{attrs:{label:0}},[e._v("暂不售卖，放入仓库")]),e._v(" "),r("el-radio",{attrs:{label:1}},[e._v("立即上架售卖")]),e._v(" "),r("el-radio",{attrs:{label:2}},[e._v("定时上架\n          "),r("el-date-picker",{attrs:{disabled:2!==e.ruleForm.is_show,type:"date",placeholder:"选择日期时间",align:"right","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.ruleForm.timing,callback:function(t){e.$set(e.ruleForm,"timing",t)},expression:"ruleForm.timing"}})],1)],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"减库存方式",prop:"is_inventory"}},[r("el-radio-group",{model:{value:e.ruleForm.is_inventory,callback:function(t){e.$set(e.ruleForm,"is_inventory",t)},expression:"ruleForm.is_inventory"}},[r("el-radio",{attrs:{label:0}},[e._v("拍下减库存")]),e._v(" "),r("el-radio",{attrs:{label:1}},[e._v("付款减库存")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"是否推荐",prop:"is_recommend"}},[r("el-radio-group",{model:{value:e.ruleForm.is_recommend,callback:function(t){e.$set(e.ruleForm,"is_recommend",t)},expression:"ruleForm.is_recommend"}},[r("el-radio",{attrs:{label:0}},[e._v("否")]),e._v(" "),r("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"是否新品",prop:"is_new"}},[r("el-radio-group",{model:{value:e.ruleForm.is_new,callback:function(t){e.$set(e.ruleForm,"is_new",t)},expression:"ruleForm.is_new"}},[r("el-radio",{attrs:{label:0}},[e._v("否")]),e._v(" "),r("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"是否热销",prop:"is_hot"}},[r("el-radio-group",{model:{value:e.ruleForm.is_hot,callback:function(t){e.$set(e.ruleForm,"is_hot",t)},expression:"ruleForm.is_hot"}},[r("el-radio",{attrs:{label:0}},[e._v("否")]),e._v(" "),r("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"排序",prop:"sort"}},[r("el-radio-group",{model:{value:e.ruleForm.sort,callback:function(t){e.$set(e.ruleForm,"sort",t)},expression:"ruleForm.sort"}},[r("el-input",{staticStyle:{width:"80px"},attrs:{maxlength:"11",clearable:""},model:{value:e.ruleForm.sort,callback:function(t){e.$set(e.ruleForm,"sort",t)},expression:"ruleForm.sort"}})],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.dialogStatus?e.createSubmit():e.updateSubmit()}}},[e._v("提交")])],1)],2)],1)},a=[];r.d(t,"a",function(){return i}),r.d(t,"b",function(){return a})},jqbs:function(e,t,r){"use strict";r.r(t);var i=r("w4xS"),a=r.n(i);for(var o in i)"default"!==o&&function(e){r.d(t,e,function(){return i[e]})}(o);t.default=a.a},"nB+H":function(e,t,r){"use strict";var i=r("bvPJ");r.n(i).a},v1P2:function(e,t,r){"use strict";r.r(t);var i=r("JxI4"),a=r.n(i);for(var o in i)"default"!==o&&function(e){r.d(t,e,function(){return i[e]})}(o);t.default=a.a},vCG0:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(r("/f1G")),a=s(r("YEIV")),o=s(r("QbLZ"));t.param2Data=function(e){if(!e||!e.length)return;var t={},r={},s={},u=e.map(function(e){var i=(0,o.default)({},e,{product_sku_id:e.id,skus:e.product_sku.map(function(e){var i=(0,n.createUniqueString)()+"_id",l=(0,n.createUniqueString)()+"_id";r[e.key]||(r[e.key]=i),s[e.value]||(s[e.value]=l);var u=r[e.key],c=s[e.value];return t[e.key]={value:e.key,id:u,leaf:(0,o.default)({},t[e.key]?t[e.key].leaf:{},(0,a.default)({},e.value,{value:e.value,id:c}))},{k_id:u,k:e.key,v_id:c,v:e.value}})});return(0,o.default)({},i,{ids:(0,l.creatIds)(i.skus)})}),c=(0,i.default)(t).map(function(e){return(0,o.default)({},e,{leaf:(0,i.default)(e.leaf)})});return{productSkus:u,specification:c}};var n=r("7Qib"),l=r("7dcK");function s(e){return e&&e.__esModule?e:{default:e}}},w4xS:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=v(r("Yz+Y")),o=v(r("iCc5")),n=v(r("V7oC")),l=v(r("FYw3")),s=v(r("mRg0")),u=v(r("QbLZ")),c=v(r("gDS+")),d=v(r("Kw5r")),p=v(r("L+H0")),f=r("7dcK"),m=r("7Qib"),g=r("X4fA");function v(e){return e&&e.__esModule?e:{default:e}}var _=(0,p.default)({props:{specification:{type:Array,default:function(){return[]}},productSkus:{type:Array,default:function(){return[]}}},data:function(){return{actionurl:"http://dsshop.test/api/v1/admin/uploadPictures",imgHeaders:{Authorization:"Bearer "+(0,g.getToken)("access_token")},imgData:{type:1,size:2097152,specification:[80,150,200,250,300,350]}}},computed:{skusList:function(){return(0,f.flatten)(this.specification).map(function(e){return{skus:e.skus,ids:(0,f.creatIds)(e.skus)}})},columns:function(){return this.specification.map(function(e){return{label:e.value,formater:function(t){return t.skus.find(function(t){return t.k===e.value}).v}}})}},methods:{updateInput:function(e,t,r){this.data[t][r]=e,this.data=JSON.parse((0,c.default)(this.data))},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2;return-1===["image/jpeg","image/gif","image/png","image/bmp"].indexOf(e.type)?(this.$message.error("请上传正确的图片格式"),!1):(t||this.$message.error("上传头像图片大小不能超过 2MB!"),t)},specificationMarketAvatarSuccess:function(e,t){this.data[t].img=e,this.data=JSON.parse((0,c.default)(this.data))}},watch:{skusList:{deep:!0,immediate:!0,handler:function(e,t){var r=this;if(!e.length)return this.data=[];if(!t||!t.length)return this.initData(e);if(e.length===t.length)return this.data=e.map(function(e,t){return(0,u.default)({},r.data[t],e)});if(e[0].skus.length!==t[0].skus.length)return this.initData(e);var i=this.diffIds(e,t);if(e.length>t.length){var a=[];e.forEach(function(e){var t=r.data.find(function(t){return t.ids===e.ids});t?a.push(t):a.push((0,u.default)({},e,{format:"",guide_price:void 0,purchase_price:void 0,sell_price:void 0}))}),this.data=a}else this.data=this.data.filter(function(e){return!i.includes(e.ids)})}}}})(i=function(e){function t(){var e,r,i,n;(0,o.default)(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return r=i=(0,l.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(u))),i.data=[],i.coefficient={purchase_coefficient:0,guide_coefficient:0},i.columnsProps={align:"center",minWidth:100},n=r,(0,l.default)(i,n)}return(0,s.default)(t,e),(0,n.default)(t,[{key:"diffIds",value:function(e,t){return e=e.map(function(e){return e.ids}),t=t.map(function(e){return e.ids}),(0,m.diffArary)(e,t)}},{key:"initData",value:function(e){if(this.productSkus&&this.productSkus.length)return this.data=this.productSkus,void this.$emit("update:productSkus",[]);this.data=e.map(function(e){return(0,u.default)({},e,{format:"",guide_price:void 0,purchase_price:void 0,sell_price:void 0})})}}]),t}(d.default))||i;t.default=_},w9L7:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("4hzs"),a=r("X4fA"),o=s(r("alm3")),n=s(r("L7y4"));r("/aIJ");var l=r("1tPa");function s(e){return e&&e.__esModule?e:{default:e}}t.default={name:"GoodDetail",components:{tinymce:o.default,Sku:n.default,videoPlayer:l.videoPlayer},props:{isEdit:{type:Boolean,default:!1}},data:function(){var e=function(e,t,r){t&&(/^\d+.?\d{0,2}$/.test(t)||r(new Error("只允许数字，并小数点后最多只能输入两位2"))),r()};return{dialogFormVisible:!1,playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"",src:""}],poster:"",notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}},freight:[],disabled:!1,sku:[],goods_brand:[],attributeMarket:[],dialogImageUrl:"",actionurl:"http://dsshop.test/api/v1/admin/uploadPictures",imgHeaders:{Authorization:"Bearer "+(0,a.getToken)("access_token")},good_attribute:[],goods_type:[],imgMasterData:{type:1,size:2097152,specification:[80,150,200,250,300,350]},imgData:{type:1,size:2097152},dialogVisible:!1,loading:!1,id:"",ruleForm:{name:"",category_id:"",number:"",brand_id:null,inventory:"",good_specification:[],market_price:"",price:"",keywords:"",short_description:"",details:"",img:"",cost_price:"",is_show:1,is_recommend:0,is_new:0,is_hot:0,is_inventory:0,sort:5,freight_id:""},imgProgress:!1,dialogStatus:"create",imgProgressPercent:0,rules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],number:[{required:!0,message:"请输入货号",trigger:"blur"}],freight_id:[{required:!0,message:"请选择运费模板",trigger:"change"}],img:[{required:!0,message:"请上传主图",trigger:"change"}],market_price:[{required:!1,validator:e,message:"只允许数字，并小数点后最多只能输入两位",trigger:"blur"}],cost_price:[{required:!1,validator:e,message:"只允许数字，并小数点后最多只能输入两位",trigger:"blur"}],price:[{required:!1,validator:e,message:"只允许数字，并小数点后最多只能输入两位",trigger:"blur"}],inventory:[{required:!1,message:"只能输入整数",trigger:"blur"}],brand_id:[{required:!0,message:"请选择品牌",trigger:"blur"}],category_id:[{required:!0,message:"请选择类目",trigger:"blur"}],details:[{required:!0,message:"请输入详情",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"}]}}},created:function(){this.isEdit&&(this.id=this.$route.query.id),this.getList()},methods:{getList:function(){var e=this;this.loading=!0,(0,i.getShow)(this.id?this.id:0,{category:(0,a.getToken)("applyCategory")}).then(function(t){e.id>0&&(e.ruleForm=t.data.goods,e.goodsType(!0),e.dialogStatus="update",e.$refs.SkuDemo._setData(e.ruleForm.good_sku),e.ruleForm.video&&(e.playerOptions.sources[0].src=e.ruleForm.video),e.ruleForm.poster&&(e.playerOptions.poster=e.ruleForm.poster)),e.goods_type=t.data.category,e.freight=t.data.freight,e.loading=!1})},createSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(t){t&&(e.ruleForm.good_sku=e.getSkuData(),(0,i.createSubmit)(e.ruleForm).then(function(){e.$notify({title:e.$t("hint.succeed"),message:e.$t("hint.creatingSuccessful"),type:"success",duration:2e3}),setTimeout(e.$router.back(-1),2e3)}))})},updateSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(t){t&&(e.ruleForm.good_sku=e.getSkuData(),(0,i.updateSubmit)(e.ruleForm.id,e.ruleForm).then(function(){e.$notify({title:e.$t("hint.succeed"),message:e.$t("hint.updateSuccessful"),type:"success",duration:2e3}),setTimeout(e.$router.push({path:"/goodsManage/product/productList?page="+e.$route.query.page+"&activeIndex="+e.$route.query.activeIndex}),2e3)}))})},handleAvatarSuccess:function(e,t){this.ruleForm.img=t.response,this.imgProgress=!1,this.imgProgressPercent=0},handleProgress:function(e,t){this.imgProgressPercent=e.percent},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2;return-1===["image/jpeg","image/gif","image/png","image/bmp"].indexOf(e.type)?(this.$message.error("请上传正确的图片格式"),!1):(t||this.$message.error("上传头像图片大小不能超过 2MB!"),this.imgProgress=!0,t)},beforeAvatarUploadList:function(e){var t=e.size/1024/1024<2;return-1===["image/jpeg","image/gif","image/png","image/bmp"].indexOf(e.type)?(this.$message.error("请上传正确的图片格式"),!1):(t||this.$message.error("上传头像图片大小不能超过 2MB!"),t)},handleAvatarSuccessList:function(e,t,r){this.ruleForm.imgList=r,this.imgProgress=!1,this.imgProgressPercent=0},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleRemove:function(e,t){this.ruleForm.imgList=t},addAttribute:function(e){this.attributeMarket[e.id]?this.attributeMarket[e.id].push({img:"",name:"",typename:e.name}):this.$set(this.attributeMarket,e.id,[{img:"",name:"",typename:e.name}])},goodsType:function(e){var t=this,r=null;(r=this.ruleForm.category_id.length?this.ruleForm.category_id[this.ruleForm.category_id.length-1]:0===this.ruleForm.category_id.length?null:this.ruleForm.category_id)&&(0,i.getSpecification)(r).then(function(r){t.ruleForm.good_specification=[],e||(t.ruleForm.brand_id=null),t.goods_brand=[],t.good_attribute=[];var i=t;r.data.specification_on.length>0?(t.good_attribute=r.data.specification_on,r.data.specification_on.forEach(function(t,r){if(i.ruleForm.good_specification_old&&i.ruleForm.good_specification_old.length>0&&e){var a=i.ruleForm.good_specification_old.findIndex(function(e){return e.specification_id===t.id});-1===a?i.ruleForm.good_specification.push({specification_id:t.id,data:null}):i.ruleForm.good_specification.push(i.ruleForm.good_specification_old[a])}else i.ruleForm.good_specification.push({specification_id:t.id,data:null})})):t.good_attribute=[],r.data.brand_on.length>0&&(t.ruleForm.brand_id=t.ruleForm.brand_id?t.ruleForm.brand_id:null,t.goods_brand=r.data.brand_on)})},getSkuData:function(){var e=this;return this.$refs.SkuDemo._getData().map(function(t){var r=t.id,i=t.format,a=t.img,o=t.market_price,n=t.cost_price,l=t.price,s=t.inventory,u=t.skus,c=u.reduce(function(e,t){return""+e+t.k+"："+t.v+"——"},"");if(""===o)throw e.$message.error(c+" 未输入市场价"),new Error("请输入市场价");if(""===n)throw e.$message.error(c+" 未输入成本价"),new Error("请输入成本价");if(""===l)throw e.$message.error(c+" 未输入销售价"),new Error("请输入销售价");if(""===s)throw e.$message.error(c+" 未输入库存"),new Error("请输入库存");return{id:r,format:i,img:a,market_price:o,cost_price:n,price:l,inventory:s,product_sku:u.map(function(e){return{key:e.k,value:e.v}})}})},setVideo:function(e){this.playerOptions.sources[0].src=this.ruleForm.video},setPoster:function(e){this.playerOptions.poster=this.ruleForm.poster},change:function(e){this.$forceUpdate()}}}},yMd6:function(e,t,r){"use strict";r.r(t);var i=r("aCVI"),a=r("jqbs");for(var o in a)"default"!==o&&function(e){r.d(t,e,function(){return a[e]})}(o);var n=r("KHd+"),l=Object(n.a)(a.default,i.a,i.b,!1,null,null,null);l.options.__file="sku-table.vue",t.default=l.exports},zJba:function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("h3",[e._v("设置产品规格")]),r("el-form-item",[r("div",{staticClass:"sku_container"},[e._l(e.specification,function(t,i){return r("div",{key:t.id,staticClass:"sku_group mb10"},[r("div",{staticClass:"spec_title"},[r("span",{staticClass:"label"},[e._v("规格名：")]),r("el-input",{staticClass:"input",attrs:{placeholder:"请输入规格名"},model:{value:t.value,callback:function(r){e.$set(t,"value","string"==typeof r?r.trim():r)},expression:"spec.value"}}),r("span",{staticClass:"remove",on:{click:function(t){e.delSepc(i)}}},[e._v("×")])],1),r("div",{staticClass:"group_container"},[r("span",{staticClass:"label"},[e._v("规格值：")]),e._l(t.leaf,function(t,a){return r("el-popover",{key:a,attrs:{placement:"bottom",width:"120",trigger:"click"}},[r("el-input",{staticStyle:{width:"110px"},model:{value:t.value,callback:function(r){e.$set(t,"value","string"==typeof r?r.trim():r)},expression:"option.value"}}),r("div",{staticClass:"sku_item",attrs:{slot:"reference"},slot:"reference"},[r("span",{staticClass:"remove",on:{click:function(t){t.stopPropagation(),e.delOption(i,a)}}},[e._v("×")]),r("div",{staticClass:"text"},[e._v(e._s(t.value))])])],1)}),r("el-input",{staticClass:"input",attrs:{"suffix-icon":"el-icon-plus",placeholder:"多个产品属性以空格隔开"},on:{blur:function(t){e.addOption(i)}},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.addOption(i)}},model:{value:e.addValues[i],callback:function(t){e.$set(e.addValues,i,t)},expression:"addValues[index]"}})],2)])}),r("div",{staticClass:"spec_title"},[r("el-button",{attrs:{type:"info",disabled:e.disabled},on:{click:e.addSpec}},[e._v("添加规格项目")])],1)],2)]),r("el-form-item",[r("div",{staticClass:"sku_container"},[r("SkuTable",{ref:"SkuTable",attrs:{specification:e.specificationFilter,productSkus:e.productSkus},on:{"update:specification":function(t){e.specificationFilter=t},"update:productSkus":function(t){e.productSkus=t}}})],1)])],1)},a=[];r.d(t,"a",function(){return i}),r.d(t,"b",function(){return a})}}]);